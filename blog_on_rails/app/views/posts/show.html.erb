<div class="mx-3 my-3">
  <div>
    <% if @comment.errors.any? %>
      <ul>
        <% @comment.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    <% end %>
    <h1><%= @post.title %></h1>
    <p><%= @post.body %></p>
    <p><%= @post.user.full_name %></p>
    <small>Posted <%= time_ago_in_words(@post.created_at) %> ago</small>
  </div>

  <div class="my-3">
    <% if can?(:crud, @post) %>
      <%= link_to "Edit", edit_post_path(@post), class:"btn btn-outline-primary" %>
      <%= link_to "Delete", post_path(@post), method: :delete, data: {confirm: "Are you srue?"}, class:"btn btn-outline-primary" %>
    <% end %>
  </div>

  <div class="form-group">
  <%= form_with(model: [@post, @comment], local: true) do |f| %>
      <h5><label>Comment</label></h5>
      <%= f.text_area(
        :body, 
        cols: 50,
        rows: 2,
        placeholder: "What's on your mind?",
        class: "form-control")
      %>
    <%= f.submit "Submit", class:"btn btn-outline-primary my-3"%>
  <% end %>
  </div>

  <div class="comment-list">
    <% if @comments!= nil %>
      <% @comments.each do |comment| %>
        <p>
          <%= comment.body %><br />
          <%= comment.user.full_name %>
          <small>
            Commented <%= time_ago_in_words (comment.created_at) %> ago
          </small>
          
          <% if can?(:crud, comment, @post) %>
          ‚óè
          <small>
              <%= link_to(
                  "Delete", 
                  post_comment_path(@post, comment), 
                  method: :delete,
                  data: {
                    confirm: "Are you sure?"
                  })
              %>
            <% end %>
          </small>
        </p>
      <% end %>
    <% end %>
  </div>
</div>



